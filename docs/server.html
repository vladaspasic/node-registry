<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Server</title>
  <meta name="description" content="Library for building scalable node.js applications with ease">

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css" />
  <link rel="stylesheet" href="/node-registry/css/main.css">

  <link rel="canonical" href="http://vladaspasic.github.io//node-registry/docs/server.html">
  <link rel="alternate" type="application/rss+xml" title="Node registry" href="/node-registry/feed.xml">

  <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Server - Node registry</title>
<meta property="og:title" content="Server" />
<meta name="description" content="Library for building scalable node.js applications with ease" />
<meta property="og:description" content="Library for building scalable node.js applications with ease" />
<link rel="canonical" href="http://vladaspasic.github.io//node-registry/docs/server.html" />
<meta property="og:url" content="http://vladaspasic.github.io//node-registry/docs/server.html" />
<meta property="og:site_name" content="Node registry" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@VladaSpasic" />
<meta name="twitter:creator" content="@Vladimir Spasic" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebPage",
"headline": "Server",
"description": "Library for building scalable node.js applications with ease",
"url": "http://vladaspasic.github.io//node-registry/docs/server.html"}</script>
<!-- End Jekyll SEO tag -->


  
    <!-- Google analytics -->
<script>
(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='https://www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-57430955-1','auto');ga('send','pageview');
</script>

  
</head>


  <body>

    <header class="navbar navbar-default site-header" role="banner">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="/node-registry/">Node registry</a>
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav class="navbar-collapse collapse" id="navbar-main">
      <ul class="nav navbar-nav navbar-right">
        <li class="active">
          <a class="page-link" href="/node-registry/docs">Docs</a>
        </li>
        <li class="">
          <a class="page-link" href="/node-registry/plugins">Plugins</a>
        </li>
        <li>
          <a class="page-link" href="/node-registry/api">API</a>
        </li>
        <li>
          <a class="page-link" href="https://github.com/vladaspasic/node-registry" target="_blank">Github</a>
        </li>
      </ul>
    </nav>
</header>


    <main class="page-content documentation container" aria-label="Content">
      <div class="row">
        <div class="col-xs-hidden col-sm-4 col-md-2">
          <ul class="nav doc-nav" data-spy="affix">
            <li>
              <a href="/node-registry/docs/getting-started">Getting started</a>
            </li>
            <li>
              <a href="/node-registry/docs/configuration">Configuration</a>
            </li>
            <li>
              <a href="/node-registry/docs/modules">Modules</a>
            </li>
            <li>
              <a href="/node-registry/docs/initializers">Initializers</a>
            </li>
            <li>
              <a href="/node-registry/docs/server">Server</a>
            </li>
          </ul>
        </div>
        <div class="col-xs-12 col-sm-8 col-md-10">
          <h3 id="server">Server</h3>

<p><strong>Registry</strong> wraps the Node HTTP/HTTPS Server to create an easily configurable <code class="highlighter-rouge">server</code> module. This module is registered inside the <strong>Container</strong> and you are able to access it everywhere in your code easily like so:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">Registry</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'server'</span><span class="p">)</span>
</code></pre>
</div>

<p>In this example we are creating a simple HTTP server with a listener function.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">Registry</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'node-registry'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">Registry</span><span class="p">.</span><span class="nx">createServer</span><span class="p">((</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s1">'It'</span><span class="nx">s</span> <span class="nx">working</span><span class="o">!</span><span class="err">'</span><span class="p">))</span>
</code></pre>
</div>

<p>When a <code class="highlighter-rouge">server</code> module is created, we can start listening for incoming requests using it’s <code class="highlighter-rouge">start</code> method.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">server</span><span class="p">.</span><span class="nx">start</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">Registry</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'An Error occured while starting server'</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Registry</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="err">`</span><span class="nx">Server</span> <span class="nx">started</span> <span class="nx">on</span> <span class="na">port</span><span class="p">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">server</span><span class="p">.</span><span class="nx">getPort</span><span class="p">()}.</span><span class="err">`</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre>
</div>

<p>The default port is set ot <code class="highlighter-rouge">8000</code>. If you wish to set a different port, or you wish add <code class="highlighter-rouge">ssl</code> certificates, you can do it like this.</p>

<p>Please notice that a listener function <strong>must</strong> be declared, as every HTTP server must have a listener for any incoming requests.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">Registry</span><span class="p">.</span><span class="nx">createServer</span><span class="p">({</span>
  <span class="na">port</span><span class="p">:</span> <span class="mi">8080</span><span class="p">,</span>
  <span class="nx">listener</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">'ok'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>
</div>

<p>Running a secure server with an SSL certificate:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">Registry</span><span class="p">.</span><span class="nx">createServer</span><span class="p">({</span>
  <span class="na">ssl</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">key</span><span class="p">:</span> <span class="s1">'my/key.pem'</span><span class="p">,</span>
    <span class="na">cert</span><span class="p">:</span> <span class="s1">'my/cert.pem'</span>
  <span class="p">},</span>
  <span class="nx">listener</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">'ok'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre>
</div>

<p>When an <code class="highlighter-rouge">ssl</code> property is set, the port value is set to <code class="highlighter-rouge">443</code>, no mater how you declared it.</p>

<h4 id="usage-with-other-frameworks">Usage with other frameworks</h4>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s1">'Hello world'</span><span class="p">))</span>

<span class="kr">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">Registry</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">);</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
</code></pre>
</div>

<p>If you wish to use <code class="highlighter-rouge">express.js</code> with <strong>Registry</strong> you can check out <a href="https://github.com/vladaspasic/node-registry-express">node-registry-express</a> plugin.</p>

<p>In case you are using a framework which creates a server by it’s own, you can override the <code class="highlighter-rouge">startServer</code> method in the <code class="highlighter-rouge">server</code> module. The <code class="highlighter-rouge">start</code> method will call the <code class="highlighter-rouge">startServer</code> function when all <code class="highlighter-rouge">initializers</code> are loaded.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">sails</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'sails'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">Registry</span><span class="p">.</span><span class="nx">createServer</span><span class="p">({</span>
    <span class="nx">startServer</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sails</span><span class="p">.</span><span class="nx">lift</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
</code></pre>
</div>
<div class="row button-navigation">
  <div class="col-xs-6 text-left">
    
      <a class="btn btn-primary prev" href="/node-registry/docs/initializers">
         <i class="fa fa-angle-left" aria-hidden="true"></i>
<span>Initializers</span>
      </a>
    
  </div>
  <div class="col-xs-6 text-right">
    
      <a class="btn btn-primary next" href="/node-registry/plugins">
        <span>Plugins</span> <i class="fa fa-angle-right" aria-hidden="true"></i>

      </a>
        
  </div>
</div>


        </div>
      </div>
    </main>

    <footer class="site-footer">
  <div class="container">
    <div class="col-sm-4">
      <!-- <ul class="nav nav-links">
        <li>
          <a href="/docs">Docs</a>
        </li>
        <li>
          <a href="/docs/quickstart">Quick start</a>
        </li>
      </ul> -->
    </div>
    <div class="col-sm-8">
      <ul class="nav icon-links">
        
          <li>
            <a href="mailto:vladimir.spasic.86@gmail.com">
               <i class="fa fa-envelope-o" aria-hidden="true"></i>

            </a>
          </li>
        
        
            <li>
              <a href="https://github.com/vladaspasic/node-registry">
                 <i class="fa fa-github" aria-hidden="true"></i>

              </a>
            </li>
            

            
            <li>
              <a href="https://twitter.com/VladaSpasic">
                 <i class="fa fa-twitter" aria-hidden="true"></i>

              </a>
            </li>
          
      </ul>
    </div>
    <div class="row">
      <div class="col-xs-12 text-center repo-link">
        <a href="https://icons8.com">Icon pack by Icons8</a><br/>
        <a href="https://github.com/vladaspasic/node-registry/blob/master/LICENSE">
          node-registry is free and open-source under the Apache v2 License.
        </a>
      </div>
    </div>
  </div>
</footer>

<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/yaml.min.js"></script>  
<script src="/node-registry/assets/javascripts/bootstrap.min.js"></script>
<script src="/node-registry/js/main.js"></script>


  </body>

</html>
